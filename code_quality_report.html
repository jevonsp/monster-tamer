<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GDScript Linter - Code Quality Report</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: #eee; padding: 20px; line-height: 1.6; }
.container { max-width: 1200px; margin: 0 auto; }
h1 { color: #00d4ff; margin-bottom: 10px; }
h2 { color: #888; font-size: 1.2em; margin: 20px 0 10px; border-bottom: 1px solid #333; padding-bottom: 5px; }
.header { text-align: center; margin-bottom: 30px; }
.subtitle { color: #888; font-size: 0.9em; }
.filters { background: #16213e; border-radius: 8px; padding: 15px; margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 15px; align-items: center; }
.filters label { color: #aaa; font-size: 0.95em; font-weight: bold; }
.filters select, .filters input { background: #0f3460; border: 1px solid #333; color: #eee; padding: 8px 12px; border-radius: 4px; font-size: 0.9em; }
.filters input { min-width: 400px; }
.filters select:focus, .filters input:focus { outline: none; border-color: #00d4ff; }
.filter-count { color: #00d4ff; font-weight: bold; margin-left: auto; }
.summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px; }
.stat-card { background: #16213e; border-radius: 8px; padding: 15px; text-align: center; }
.stat-card .value { font-size: 2em; font-weight: bold; }
.stat-card .label { color: #888; font-size: 0.85em; }
.stat-card.critical .value { color: #ff6b6b; }
.stat-card.warning .value { color: #ffd93d; }
.stat-card.info .value { color: #6bcb77; }
.issues-section { margin-bottom: 30px; }
.section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
.section-header .icon { font-size: 1.5em; }
.section-header.critical { color: #ff6b6b; }
.section-header.warning { color: #ffd93d; }
.section-header.info { color: #6bcb77; }
.section-header .count { font-size: 0.8em; color: #888; }
.issue { background: #16213e; border-radius: 6px; padding: 12px 15px; margin-bottom: 8px; display: flex; flex-wrap: wrap; gap: 10px; }
.issue.hidden { display: none; }
.issue .location { font-family: 'Consolas', 'Monaco', monospace; font-size: 0.85em; color: #00d4ff; min-width: 300px; word-break: break-all; }
.issue .message { flex: 1; color: #ccc; }
.issue .check-id { font-size: 0.75em; background: #0f3460; padding: 2px 8px; border-radius: 4px; color: #888; }
.footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #333; color: #666; font-size: 0.85em; }
.footer a { color: #00d4ff; text-decoration: none; }
.no-results { text-align: center; color: #666; padding: 40px; }
.context-section { background: #16213e; border-radius: 8px; padding: 20px; margin-bottom: 30px; border-left: 4px solid #00d4ff; }
.context-section h2 { color: #00d4ff; margin-bottom: 15px; font-size: 1.1em; border: none; }
.context-section pre { background: #0f3460; padding: 15px; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.85em; color: #ccc; max-height: 300px; overflow-y: auto; }
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>ðŸ”· GDScript Linter</h1>
<p class="subtitle">Code Quality Report</p>
</div>

<div class="summary">
<div class="stat-card"><div class="value">17</div><div class="label">Files Analyzed</div></div>
<div class="stat-card"><div class="value">974</div><div class="label">Lines of Code</div></div>
<div class="stat-card critical"><div class="value">1</div><div class="label">Critical Issues</div></div>
<div class="stat-card warning"><div class="value">16</div><div class="label">Warnings</div></div>
<div class="stat-card info"><div class="value">51</div><div class="label">Info</div></div>
<div class="stat-card"><div class="value">80</div><div class="label">Debt Score</div></div>
</div>

<div class="filters">
<label>Severity:</label>
<select id="severityFilter" onchange="onSeverityChange()">
<option value="all">All Severities</option>
<option value="critical">Critical</option>
<option value="warning">Warning</option>
<option value="info">Info</option>
</select>
<label>Type:</label>
<select id="typeFilter" onchange="applyFilters()">
<option value="all">All Types</option>
</select>
<label>File:</label>
<input type="text" id="fileFilter" placeholder="Filter by filename..." oninput="applyFilters()">
<span class="filter-count" id="filterCount"></span>
</div>

<div id="issuesContainer">
<div class="context-section">
<h2>ðŸ“‹ Analysis Context</h2>
<pre>When analyzing linter issues, consider both quick fixes AND architectural improvements:

1. **Evaluate the code holistically** - Before suggesting an ignore directive, ask:
   - Could extraction improve testability or reusability?
   - Does this file have multiple responsibilities that should be separated?
   - Would a component/helper class make the code easier to extend?
   - Is the complexity hiding a design problem?

2. **Ignore directives are appropriate when:**
   - Code is clean, readable, and slightly over a limit
   - Extraction would add complexity without clear benefit
   - The "violation" is inherent to the domain (e.g., large enum files)

3. **Refactoring is appropriate when:**
   - Multiple responsibilities are tangled together
   - The same code section is frequently modified
   - Testing requires mocking the entire class
   - New features keep touching the same file

Always explain your reasoning for recommending a refactor vs an ignore directive.

**Required steps:**
- Before adding any ignore directive, read `res://addons/gdscript-linter/IGNORE_RULES.md` for correct syntax
- After completing changes, run the linter via CLI using options in `res://addons/gdscript-linter/CLI.md`</pre>
</div>
<div class="issues-section" data-severity="critical"><div class="section-header critical"><span class="icon">ðŸ”´</span><h2>Critical Issues (<span class="count">1</span>)</h2></div>
<div class="issue" data-severity="critical" data-type="file-length" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:1</span><span class="message">File exceeds 300 lines (358)</span><span class="check-id">file-length</span></div>
</div>
<div class="issues-section" data-severity="warning"><div class="section-header warning"><span class="icon">ðŸŸ¡</span><h2>Warnings (<span class="count">16</span>)</h2></div>
<div class="issue" data-severity="warning" data-type="file-length" data-file="res://player/player.gd"><span class="location">res://player/player.gd:1</span><span class="message">File exceeds 200 lines (230)</span><span class="check-id">file-length</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://player/player.gd"><span class="location">res://player/player.gd:202</span><span class="message">Debug print statement: print_debug("Player party: ")</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://player/player.gd"><span class="location">res://player/player.gd:204</span><span class="message">Debug print statement: print("   ", m.name)</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="deep-nesting" data-file="res://player/player.gd"><span class="location">res://player/player.gd:85</span><span class="message">Function 'process_turning_state' has 4 nesting levels (max 3)</span><span class="check-id">deep-nesting</span></div>
<div class="issue" data-severity="warning" data-type="deep-nesting" data-file="res://player/player.gd"><span class="location">res://player/player.gd:104</span><span class="message">Function 'process_walking_state' has 4 nesting levels (max 3)</span><span class="check-id">deep-nesting</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://classes/Move.gd"><span class="location">res://classes/Move.gd:13</span><span class="message">Debug print statement: print_debug("Move=%s, Actor=%s, Target=%s" % [self, actor, t</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://classes/Move.gd"><span class="location">res://classes/Move.gd:16</span><span class="message">Debug print statement: print("pre_text: ", pre_text)</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:41</span><span class="message">Debug print statement: print_debug("%s moves:" % [self])</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:44</span><span class="message">Debug print statement: print("   ", m.name)</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:46</span><span class="message">Debug print statement: print("    Empty slot")</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="god-class-signals" data-file="res://main/Global.gd"><span class="location">res://main/Global.gd:1</span><span class="message">God class: 17 signals (max 10)</span><span class="check-id">god-class-signals</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:185</span><span class="message">Debug print statement: print("got signal")</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:218</span><span class="message">Debug print statement: print("would win here")</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:222</span><span class="message">Debug print statement: print("would lose here")</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://battle/player_exp_bar.gd"><span class="location">res://battle/player_exp_bar.gd:12</span><span class="message">Debug print statement: print(amount)</span><span class="check-id">print-statement</span></div>
<div class="issue" data-severity="warning" data-type="print-statement" data-file="res://battle/player_exp_bar.gd"><span class="location">res://battle/player_exp_bar.gd:14</span><span class="message">Debug print statement: print("emitted")</span><span class="check-id">print-statement</span></div>
</div>
<div class="issues-section" data-severity="info"><div class="section-header info"><span class="icon">ðŸ”µ</span><h2>Info (<span class="count">51</span>)</h2></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:7</span><span class="message">Variable 'current_state' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:8</span><span class="message">Variable 'facing_direction' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:60</span><span class="message">Variable 'directions' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:74</span><span class="message">Variable 'input_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:77</span><span class="message">Variable 'new_facing_direction' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:88</span><span class="message">Variable 'input_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:91</span><span class="message">Variable 'last_key' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:97</span><span class="message">Variable 'blend_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:112</span><span class="message">Variable 'input_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:114</span><span class="message">Variable 'new_facing_direction' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:137</span><span class="message">Variable 'ray_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:156</span><span class="message">Variable 'blend_dir' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:166</span><span class="message">Variable 'direction_map' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:173</span><span class="message">Variable 'key' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://player/player.gd"><span class="location">res://player/player.gd:187</span><span class="message">Variable 'collider' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="magic-number" data-file="res://player/player.gd"><span class="location">res://player/player.gd:208</span><span class="message">Magic number 6 (consider using a named constant)</span><span class="check-id">magic-number</span></div>
<div class="issue" data-severity="info" data-type="missing-return-type" data-file="res://player/player.gd"><span class="location">res://player/player.gd:198</span><span class="message">Function 'add' has no return type annotation</span><span class="check-id">missing-return-type</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://world_objects/wild_zone.gd"><span class="location">res://world_objects/wild_zone.gd:23</span><span class="message">Variable 'roll' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://world_objects/wild_zone.gd"><span class="location">res://world_objects/wild_zone.gd:30</span><span class="message">Variable 'level' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://world_objects/encounter_zone.gd"><span class="location">res://world_objects/encounter_zone.gd:15</span><span class="message">Variable 'space_state' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://world_objects/encounter_zone.gd"><span class="location">res://world_objects/encounter_zone.gd:16</span><span class="message">Variable 'params' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://world_objects/encounter_zone.gd"><span class="location">res://world_objects/encounter_zone.gd:20</span><span class="message">Variable 'result' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="empty-function" data-file="res://world_objects/encounter_zone.gd"><span class="location">res://world_objects/encounter_zone.gd:27</span><span class="message">Function 'trigger' is empty or contains only 'pass'</span><span class="check-id">empty-function</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://classes/Move.gd"><span class="location">res://classes/Move.gd:14</span><span class="message">Variable 'damage' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-return-type" data-file="res://classes/Move.gd"><span class="location">res://classes/Move.gd:12</span><span class="message">Function 'execute' has no return type annotation</span><span class="check-id">missing-return-type</span></div>
<div class="issue" data-severity="info" data-type="magic-number" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:3</span><span class="message">Magic number 50 (consider using a named constant)</span><span class="check-id">magic-number</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:33</span><span class="message">Variable 'move_level' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:34</span><span class="message">Variable 'move_gained' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-return-type" data-file="res://classes/Monster.gd"><span class="location">res://classes/Monster.gd:62</span><span class="message">Function 'faint' has no return type annotation</span><span class="check-id">missing-return-type</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://classes/MonsterData.gd"><span class="location">res://classes/MonsterData.gd:13</span><span class="message">Variable 'monster' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://main/main.gd"><span class="location">res://main/main.gd:8</span><span class="message">Variable 'monster' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/texture_rect.gd"><span class="location">res://battle/texture_rect.gd:2</span><span class="message">Variable 'player_actor' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/texture_rect.gd"><span class="location">res://battle/texture_rect.gd:3</span><span class="message">Variable 'enemy_actor' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/animation_container.gd"><span class="location">res://battle/animation_container.gd:8</span><span class="message">Variable 'animation' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:76</span><span class="message">Variable 'monster' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:151</span><span class="message">Variable 'move' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:159</span><span class="message">Variable 'target' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:175</span><span class="message">Variable 'actor' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:177</span><span class="message">Variable 'exp_completed' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:178</span><span class="message">Variable 'on_exp_complete' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:263</span><span class="message">Variable 'max_exp' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:264</span><span class="message">Variable 'min_exp' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:312</span><span class="message">Variable 'children' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:318</span><span class="message">Variable 'children' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:324</span><span class="message">Variable 'focused' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="magic-number" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:348</span><span class="message">Magic number 3 (consider using a named constant)</span><span class="check-id">magic-number</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:352</span><span class="message">Variable 'num' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/battle.gd"><span class="location">res://battle/battle.gd:355</span><span class="message">Variable 'move' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/player_exp_bar.gd"><span class="location">res://battle/player_exp_bar.gd:2</span><span class="message">Variable 'actor' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/hp_bar.gd"><span class="location">res://battle/hp_bar.gd:2</span><span class="message">Variable 'actor' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
<div class="issue" data-severity="info" data-type="missing-type-hint" data-file="res://battle/hp_bar.gd"><span class="location">res://battle/hp_bar.gd:12</span><span class="message">Variable 'tween' has no type annotation</span><span class="check-id">missing-type-hint</span></div>
</div>
</div>
<div id="noResults" class="no-results" style="display:none;">No issues match the current filters</div>

<div class="footer">
<p>Generated by <a href="https://poplava.itch.io">GDScript Linter</a> in 51ms</p>
</div>
</div>

<script>
// Type name mapping and severity->types data for linked filtering
const TYPE_NAMES = {"file-length":"File Length","missing-type-hint":"Missing Type Hint","print-statement":"Print Statement","magic-number":"Magic Number","deep-nesting":"Deep Nesting","missing-return-type":"Missing Return Type","empty-function":"Empty Function","god-class-signals":"god-class-signals"};
const SEVERITY_TYPES = {"all":["deep-nesting","empty-function","file-length","god-class-signals","magic-number","missing-return-type","missing-type-hint","print-statement"],"critical":["file-length"],"warning":["deep-nesting","file-length","god-class-signals","print-statement"],"info":["empty-function","magic-number","missing-return-type","missing-type-hint"]};

function populateTypeFilter(severity) {
	const typeFilter = document.getElementById('typeFilter');
	const prevValue = typeFilter.value;

	// Clear and rebuild options
	typeFilter.innerHTML = '<option value="all">All Types</option>';

	const types = SEVERITY_TYPES[severity] || [];
	types.forEach(checkId => {
		const option = document.createElement('option');
		option.value = checkId;
		option.textContent = TYPE_NAMES[checkId] || checkId;
		typeFilter.appendChild(option);
	});

	// Try to restore previous selection if it still exists
	const options = Array.from(typeFilter.options);
	const found = options.find(opt => opt.value === prevValue);
	if (found) {
		typeFilter.value = prevValue;
	} else {
		typeFilter.value = 'all';
	}
}

function onSeverityChange() {
	const severity = document.getElementById('severityFilter').value;
	populateTypeFilter(severity);
	applyFilters();
}

function applyFilters() {
	const severity = document.getElementById('severityFilter').value;
	const type = document.getElementById('typeFilter').value;
	const file = document.getElementById('fileFilter').value.toLowerCase();

	const issues = document.querySelectorAll('.issue');
	let visibleCount = 0;

	issues.forEach(issue => {
		const issueSeverity = issue.dataset.severity;
		const issueType = issue.dataset.type;
		const issueFile = issue.dataset.file.toLowerCase();

		const matchSeverity = severity === 'all' || issueSeverity === severity;
		const matchType = type === 'all' || issueType === type;
		const matchFile = file === '' || issueFile.includes(file);

		if (matchSeverity && matchType && matchFile) {
			issue.classList.remove('hidden');
			visibleCount++;
		} else {
			issue.classList.add('hidden');
		}
	});

	// Update section visibility and counts
	document.querySelectorAll('.issues-section').forEach(section => {
		const visibleInSection = section.querySelectorAll('.issue:not(.hidden)').length;
		section.querySelector('.count').textContent = visibleInSection;
		section.style.display = visibleInSection > 0 ? 'block' : 'none';
	});

	// Show/hide no results message
	document.getElementById('noResults').style.display = visibleCount === 0 ? 'block' : 'none';

	// Update filter count
	const total = issues.length;
	document.getElementById('filterCount').textContent = visibleCount === total ? '' : visibleCount + ' / ' + total + ' shown';
}

// Initialize
populateTypeFilter('all');
applyFilters();
</script>
</body>
</html>
